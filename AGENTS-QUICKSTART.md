# Agent Quickstart Guide

**You are:** [Claude Code (Primary Dev) | Jules VM (CI/CD) | Gemini CLI (Optional Polish)]
**Current Project:** MeoCRM v4.0 - Multi-tenant CRM (30% complete, 187 tasks)
**Workflow:** Option 3 - Claude Solo + Jules CI/CD (Unlimited usage budget)
**Last Updated:** 2025-11-16

---

## üöÄ First 5 Minutes (Essential Reading)

**Read these in order (15 min total):**

### 1. [AGENTS.md](./AGENTS.md) - Section 1-2 + Section 5 (10 min)
   - **What to learn:** Environment setup, current status, **NEW Option 3 workflow**
   - **Key sections:**
     - Section 1: Onboarding / Environment
     - Section 2: Current Project Status
     - **Section 5: Option 3 Workflow (Claude Solo + Jules CI/CD)** ‚≠ê NEW
   - **Context load:** ~500 lines

### 2. [ROADMAP.md](./ROADMAP.md) - Executive Summary only (3 min)
   - **What to learn:** Current progress, critical path, available tasks
   - **Key sections:** Lines 1-50 (Executive Summary)
   - **Context load:** ~400 lines

### 3. [DEVELOPMENT_LESSONS_LEARNED.md](./DEVELOPMENT_LESSONS_LEARNED.md) - All 10 Lessons (5 min)
   - **What to learn:** Code patterns you MUST follow
   - **Critical:** All 10 lessons internalized (Claude will follow automatically)
   - **Context load:** ~400 lines

### 4. [Documentation-Map.md](./docs/Documentation-Map.md) (2 min)
   - **What to learn:** Where to find specific documentation
   - **Context load:** ~20 lines

**Total essential context:** ~1,300 lines (~16k tokens)
**Claude context available:** 1M tokens (you still have 98% free for implementation!)

---

## üìö Before Starting a Task (10 min)

**Read based on task type:**

| Task Type | Must Read | Optional | Time |
|-----------|-----------|----------|------|
| **Backend API** | Business Logic + API Reference + ROADMAP task | Architecture | 10 min |
| **Frontend UI** | API Reference + ROADMAP task | Business Logic | 8 min |
| **Database Schema** | Database Schema + Business Logic | Architecture | 12 min |
| **Testing** | Testing Strategy + ROADMAP task | - | 5 min |
| **Bug Fix** | TROUBLESHOOTING + GitHub issue | Relevant module doc | Varies |

**Document locations:**
- Business Logic: `docs/01_BUSINESS_LOGIC.md`
- API Reference: `docs/04_API_REFERENCE.md`
- Database Schema: `docs/03_DATABASE_SCHEMA.md`
- Testing Strategy: `docs/testing/Strategy-&-Coverage.md`
- Troubleshooting: `docs/06_TROUBLESHOOTING.md`

---

## üéØ Your Role-Specific Guide

### If you are **Claude Code**:

**Primary responsibility:** ALL development (implementation + testing + documentation)

**Before starting task:**
1. Load essential context (~1,300 lines, only 2% of 1M capacity):
   - ROADMAP.md task details
   - DEVELOPMENT_LESSONS_LEARNED.md (all 10 lessons)
   - Relevant business logic / API reference
2. Verify environment ready:
   ```bash
   git status  # Clean working tree
   git pull origin dev  # Latest code
   pnpm -w build  # Baseline passes
   ```

**Implementation workflow:**
1. **Code**: Follow all 10 lessons from DEVELOPMENT_LESSONS_LEARNED.md
2. **Test**: Write tests covering happy path + error cases
3. **Document**: Update ROADMAP.md + relevant docs in same commit
4. **Push**: Create PR with detailed description

**Critical checklist (10 items from DEVELOPMENT_LESSONS_LEARNED.md):**
- [ ] Response format: `{ data: T }` or `{ data: T[], meta }`
- [ ] OrganizationGuard on all controller endpoints
- [ ] @OrganizationId() decorator usage
- [ ] URL paths use `/api` prefix
- [ ] Error format: `{code, message, traceId}`
- [ ] No Next.js client-side redirects
- [ ] No hardcoded values (use Settings service)
- [ ] Tests cover all scenarios
- [ ] ROADMAP.md updated
- [ ] Commit format: `ü§ñ Generated by Claude Code`

**After pushing:**
- Jules VM will auto-validate in real environment
- Review Jules test report in PR comments
- Fix any issues Jules finds, then re-push

**Read:** AGENTS.md section 5 "Phases 2-4: CLAUDE SOLO"

---

### If you are **Jules VM**:

**Primary responsibility:** Automated CI/CD validation (NOT development)

**You will receive:** PR number from user after Claude pushes code

**Your automated workflow:**
1. Checkout PR branch: `gh pr checkout <number>`
2. Sync environment:
   ```bash
   sudo docker ps  # Verify postgres@2001, redis@2002
   pnpm db:generate
   pnpm --filter @meocrm/api-client build
   ```
3. Run full test suite:
   ```bash
   pnpm -w build
   pnpm -w test --coverage > /tmp/test-results.txt 2>&1
   ```
4. Post results as PR comment with:
   - ‚úÖ/‚ùå Build status
   - ‚úÖ/‚ùå Test results (pass/fail counts)
   - Coverage percentage
   - Any error logs

**Critical rules:**
- Do NOT write code (Claude handles all development)
- Do NOT suggest fixes (just report test results)
- Do NOT merge PRs (user handles merge)

**Read:** AGENTS.md section 5 "Phase 5: JULES CI/CD"

---

### If you are **Gemini CLI**:

**Primary responsibility:** Polish + Documentation updates

**When to engage:**
- Tagged in PR by Claude after code review approval
- Complex PRs needing extensive documentation
- Optional for simple CRUD implementations

**Focus areas:**
1. Add/improve JSDoc comments on public methods
2. Update `docs/04_API_REFERENCE.md` with new endpoints
3. Update `CHANGELOG.md` with changes
4. Optimize error messages (clarity, not functionality)
5. Refactor duplicated code (if safe)

**Must verify:**
- Tests still pass after polish: `pnpm -w test`
- No functional changes (only polish)

**Final step:**
- Comment on PR: "Integration complete ‚úÖ"
- Notify project owner for merge approval

**Read:** AGENTS.md section 5 "Phase 4: INTEGRATE"

---

## ‚ö†Ô∏è Common Pitfalls (Avoid These!)

### 1. Reading Outdated Documentation

**‚ùå Don't read these (outdated):**
- `docs/00_PROJECT_OVERVIEW.md` - Task counts outdated (shows 136, actual 187)
- `docs/agents/jules-guide.md` - DEPRECATED (see deprecation notice)

**‚úÖ Always use:**
- `ROADMAP.md` - Current task status and progress
- `AGENTS.md` - Current workflow and coordination protocol

---

### 2. Skipping ROADMAP.md Update

**Problem:** Git pre-commit hook will block your commit if you change code files without updating ROADMAP.md

**Solution:**
```bash
# When you complete a task, update ROADMAP.md:
sed -i 's/\[ \] TASK-ID/\[x\] TASK-ID/' ROADMAP.md
git add ROADMAP.md apps/api/src/...
git commit -m "feat: implement feature"
```

---

### 3. Breaking Response Format

**‚ùå Wrong:**
```typescript
return customer;  // Direct object
return customers; // Direct array
```

**‚úÖ Correct:**
```typescript
return { data: customer };           // Single item
return { data: customers, meta: { total, page, limit } }; // List
```

**Reference:** DEVELOPMENT_LESSONS_LEARNED.md Lesson #1

---

### 4. Forgetting OrganizationGuard

**‚ùå Wrong:**
```typescript
@Controller('products')
export class ProductsController {
  @Get()
  findAll() { ... }  // Missing guard!
}
```

**‚úÖ Correct:**
```typescript
@Controller('products')
@UseGuards(OrganizationGuard)
export class ProductsController {
  @Get()
  findAll(@OrganizationId() organizationId: string) { ... }
}
```

**Reference:** DEVELOPMENT_LESSONS_LEARNED.md Lesson #6

---

### 5. Trying to Validate Tests Locally (Claude can't run Docker!)

**‚ùå Wrong approach:**
- Claude tries to run `pnpm -w test` locally
- Fails because Claude doesn't have Docker access
- Wastes time debugging environment issues

**‚úÖ Correct workflow (Option 3):**
- Claude writes code + tests, pushes to PR
- Jules VM validates in real environment with Docker
- Claude reviews Jules' test report, fixes if needed
- No need for `.agent-lock.json` (solo developer model)

---

## üìû Need Help?

| Question Type | Where to Look | Estimated Read Time |
|--------------|---------------|-------------------|
| "What's the current progress?" | ROADMAP.md Executive Summary | 2 min |
| "How do I implement feature X?" | docs/01_BUSINESS_LOGIC.md | 10-15 min |
| "Why is my build failing?" | docs/06_TROUBLESHOOTING.md | 5 min |
| "What's the coordination workflow?" | AGENTS.md section 5 | 10 min |
| "What code patterns should I follow?" | DEVELOPMENT_LESSONS_LEARNED.md | 15 min |
| "Where's the database schema?" | docs/03_DATABASE_SCHEMA.md | 10 min |
| "How do settings work?" | docs/settings/README.md | 10 min |
| "How to integrate external APIs?" | docs/integration/README.md | 8 min |

---

## üîÑ Workflow Summary (1 Complete Task)

**Option 3: Claude Solo + Jules CI/CD**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Phase 1: PLAN (You + Claude)                               ‚îÇ
‚îÇ ‚Üí Review ROADMAP.md ‚Üí Select task ‚Üí Discuss requirements   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Phase 2-4: CLAUDE SOLO (ALL Development)                   ‚îÇ
‚îÇ ‚Üí Load context (1,300 lines) ‚Üí Code ‚Üí Test ‚Üí Document      ‚îÇ
‚îÇ ‚Üí Push to feature branch ‚Üí Create PR                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Phase 5: JULES CI/CD (Automated Validation)                ‚îÇ
‚îÇ ‚Üí Checkout PR ‚Üí Run tests in VM ‚Üí Post results as comment  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Phase 6: MERGE (You)                                        ‚îÇ
‚îÇ ‚Üí Review PR + Jules report ‚Üí Merge if green ‚Üí Next task    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Time estimates per task (Option 3 - 25% faster than old workflow):**
- **Simple** (1 CRUD endpoint): 1.5-2 hours total
- **Medium** (Full module): 3.5-5 hours total
- **Complex** (Multi-module): 7-9 hours total

**Daily throughput (Safe & Complete mode):**
- 3-4 simple tasks OR
- 1-2 medium tasks OR
- 1 complex task

**Key benefits:**
- ‚úÖ No coordination overhead (solo developer)
- ‚úÖ 100% conflict elimination
- ‚úÖ Claude's 1M context = full project understanding
- ‚úÖ Jules validates in real environment (catches Docker/DB issues)

---

## üéØ Quick Reference Card

**Before starting ANY task:**

‚úÖ **Claude Code checklist:**
- [ ] Read ROADMAP.md for task details
- [ ] Load DEVELOPMENT_LESSONS_LEARNED.md (all 10 lessons)
- [ ] Load relevant docs (Business Logic / API Reference)
- [ ] Verify baseline: `git pull && pnpm -w build`
- [ ] Create feature branch from dev

‚úÖ **Jules VM checklist (when assigned PR validation):**
- [ ] Receive PR number from user
- [ ] Docker services running: `sudo docker ps`
- [ ] Run automated test script
- [ ] Post results to PR comments
- [ ] Do NOT write code or suggest fixes

‚úÖ **Gemini CLI checklist (optional polish):**
- [ ] PR approved by user
- [ ] Baseline tests passing
- [ ] Focus on docs/comments only (no functional changes)

---

## üìñ Full Documentation Index

**Priority üî¥ (Must read for any task):**
1. ROADMAP.md - Current status
2. AGENTS.md - Your manual
3. DEVELOPMENT_LESSONS_LEARNED.md - Code patterns

**Priority üü† (Read based on task type):**
4. docs/01_BUSINESS_LOGIC.md - Business rules
5. docs/04_API_REFERENCE.md - Endpoint specs
6. docs/03_DATABASE_SCHEMA.md - Data models

**Priority üü° (Read when needed):**
7. docs/settings/README.md - Feature flags
8. docs/integration/README.md - External APIs
9. docs/testing/Strategy-&-Coverage.md - Testing approach
10. docs/06_TROUBLESHOOTING.md - Common errors
11. docs/architecture/README.md - System design

**Priority üü¢ (Reference only):**
12. docs/ENVIRONMENT.md - Local setup
13. docs/Documentation-Map.md - Full index
14. README.md - Project overview

---

## üÜò Emergency Contacts

**If you are completely stuck:**

1. **Environment issues:** Read `docs/06_TROUBLESHOOTING.md`
2. **Unclear requirements:** Check GitHub issue + ROADMAP.md task description
3. **Conflicting instructions:** ROADMAP.md + AGENTS.md are source of truth
4. **Test failures:** Read error message ‚Üí Check DEVELOPMENT_LESSONS_LEARNED.md
5. **Still stuck:** Create GitHub issue with:
   - What you tried
   - Error messages
   - Which docs you read

---

**Remember:** Safe & Complete > Fast & Risky

**Good luck!** üöÄ

---

**Maintained by:** Claude Code
**Feedback:** Create issue if this guide is unclear
**Last reviewed:** 2025-11-16
